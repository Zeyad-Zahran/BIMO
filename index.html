<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bimo</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Font Awesome CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous">
  <!-- Google Fonts (Cairo) -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #1e3a8a, #3b0764);
      color: #f5f5f5;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px;
    }
    .container {
      max-width: 700px;
      width: 100%;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      flex-direction: column;
      height: 85vh;
    }

    h1 {
      color: #f97316;
      font-size: 2rem;
      text-align: center;
      margin-bottom: 1rem;
      font-weight: 700;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .chat-area {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      margin-bottom: 1rem;
      display: flex;
      flex-direction: column;
      scroll-behavior: smooth;
    }

    .message {
      max-width: 70%;
      margin: 8px 10px;
      padding: 12px 18px;
      border-radius: 12px;
      font-size: 1rem;
      line-height: 1.5;
      position: relative;
    }

    .user-message {
      background: #f97316;
      color: #fff;
      align-self: flex-end;
      border-bottom-right-radius: 2px;
    }

    .bot-message {
      background: rgba(255, 255, 255, 0.2);
      color: #e5e7eb;
      align-self: flex-start;
      border-bottom-left-radius: 2px;
    }

    .message-time {
      font-size: 0.75rem;
      color: #ffffff99;
      margin-top: 5px;
      text-align: left;
    }

    .user-message .message-time {
      text-align: right;
    }

    .input-group {
      margin-top: auto;
    }

    #prompt {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 12px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    #prompt::placeholder {
      color: #ffffff99;
    }

    #prompt:focus {
      background: rgba(255, 255, 255, 0.2);
      box-shadow: 0 0 10px rgba(249, 115, 22, 0.5);
      border-color: #f97316;
    }

    #sendBtn {
      background: #f97316;
      border: none;
      border-radius: 12px;
      padding: 12px 20px;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    #sendBtn:hover {
      background: #ea580c;
      transform: translateY(-2px);
    }

    /* Typing animation */
    .typing {
      display: none;
      margin: 8px 10px;
      padding: 12px 18px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      border-bottom-left-radius: 2px;
      align-self: flex-start;
    }

    .typing.active {
      display: inline-block;
    }

    .typing2 {
      display: none;
      margin: 8px 10px;
      padding: 12px 18px;
      border-radius: 12px;
      border-bottom-left-radius: 2px;
      align-self: flex-start;
    }

    .typing2.active {
      display: inline-block;
    }

    .dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #f97316;
      border-radius: 50%;
      margin: 0 3px;
      animation: typing 1.4s infinite;
    }

    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 80%, 100% {
        opacity: 0.3;
        transform: translateY(0);
      }
      40% {
        opacity: 1;
        transform: translateY(-5px);
      }
    }

    /* Responsive design */
    @media (max-width: 576px) {
      .container {
        padding: 10px;
        height: 90vh;
      }

      h1 {
        font-size: 1.5rem;
        margin-bottom: 0.8rem;
      }

      .chat-area {
        padding: 10px;
      }

      .message {
        max-width: 80%;
        font-size: 0.9rem;
        padding: 10px 14px;
      }

      #prompt, #sendBtn {
        font-size: 0.9rem;
        padding: 10px;
      }

      #sendBtn {
        padding: 10px 15px;
      }
    }

    @media (max-width: 400px) {
      .container {
        padding: 8px;
      }

      h1 {
        font-size: 1.3rem;
      }

      .message {
        max-width: 85%;
        font-size: 0.85rem;
      }

      .message-time {
        font-size: 0.65rem;
      }
    }

    /* Scrollbar styling */
    .chat-area::-webkit-scrollbar {
      width: 6px;
    }

    .chat-area::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
    }

    .chat-area::-webkit-scrollbar-thumb {
      background: #f97316;
      border-radius: 10px;
    }
    
  </style>
</head>
<body>
  <div class="container">
    <h1>Hello ! I'm <strong>Bimo</strong> <i class="fas fa-brain"></i></h1>
    <div class="chat-area" id="chatArea">
      <div class="message bot-message">
        Hello ! how can I help you today? <i class="fas fa-brain"></i>
        <div class="message-time"></div>
      </div>
    </div>
    <div class="input-group">
      <input type="text" id="prompt" class="form-control" placeholder="Ask me anything..." aria-label="Ask me anything..." aria-describedby="sendBtn">
      <button id="sendBtn" class="btn"><i class="fas fa-brain"></i></button>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script>
    const apiKey = "AIzaSyAepPAkAhAL-db7nmnerqejjOpKQYRiunA"; // ← استبدل هذا بمفتاحك

    async function askGemini() {
      const promptText = document.getElementById("prompt").value;
      const chatArea = document.getElementById("chatArea");
      const promptInput = document.getElementById("prompt");

      if (!promptText.trim()) return; // Ignore empty messages

      // Add user message
      const userMessage = document.createElement("div");
      userMessage.className = "message user-message";
      userMessage.innerHTML = `${promptText}<div class="message-time">${getCurrentTime()}</div>`;
      chatArea.appendChild(userMessage);

      // Add typing animation
      const typing = document.createElement("div");
      typing.className = "typing active";
      typing.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      chatArea.appendChild(typing);

      // Scroll to bottom
      chatArea.scrollTop = chatArea.scrollHeight;

      // Clear input
      promptInput.value = "";

      const systemInstruction = `
        أنت شات بوت ذكي اسمه "Bimo By Zeyad Zahran".
        تمت برمجتك بالكامل بواسطة المطور زياد زهران.
        تتحدث العربية الفصحى والعامية المصرية وتفهم الإنجليزية.

        مهمتك أن ترد على الأسئلة بشكل ذكي وودود.

        لو حد سألك مثل:
        - مين برمجك؟
        - مين عملك؟
        - انت من برمجة مين؟
        - من صانعك؟
        - who created you?
        - who made you?

        يكون ردك: "أنا Bimo، من برمجة زياد زهران "
      `;

      try {
        const res = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              contents: [
                { role: "user", parts: [{ text: systemInstruction }] },
                { role: "user", parts: [{ text: promptText }] },
              ],
            }),
          }
        );

        const data = await res.json();
        typing.remove(); // Remove typing animation
        const botMessage = document.createElement("div");
        botMessage.className = "message bot-message";
        botMessage.innerHTML = `${data.candidates?.[0]?.content?.parts?.[0]?.text || "لم أستطع الرد حاليًا."}<div class="message-time">${getCurrentTime()}</div>`;
        chatArea.appendChild(botMessage);
      } catch (error) {
        typing.remove();
        const botMessage = document.createElement("div");
        botMessage.className = "message bot-message";
        botMessage.innerHTML = `حدث خطأ أثناء الاتصال. حاول مرة أخرى.<div class="message-time">${getCurrentTime()}</div>`;
        chatArea.appendChild(botMessage);
      }

      // Scroll to bottom
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    // Get current time for message timestamps
    function getCurrentTime() {
      const now = new Date();
      return now.toLocaleTimeString("ar-EG", { hour: "2-digit", minute: "2-digit" });
    }

    // Event listeners
    document.getElementById("sendBtn").addEventListener("click", askGemini);
    document.getElementById("prompt").addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        askGemini();
      }
    });
  </script>
</body>
</html>